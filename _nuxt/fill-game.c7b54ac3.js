import{b as C,r as T,e as U,f as p,a as I,o as a,h as j,i as N,j as x,k,u as c,l as b,w as d,F as P,m as B,T as V,p as Z,c as y,q as ee,s as te,t as E,v as q,x as ne}from"./entry.19e62a57.js";import{T as A}from"./TheHeadline.ac56f5f8.js";import{u as se}from"./use-route.06fdc41d.js";import{D as H}from"./index.22ec1e5d.js";const oe=C({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(s,{slots:e,attrs:t}){const n=T(!1);return U(()=>{n.value=!0}),o=>{var _;if(n.value)return(_=e.default)==null?void 0:_.call(e);const u=e.fallback||e.placeholder;if(u)return u();const l=o.fallback||o.placeholder||"",S=o.fallbackTag||o.placeholderTag||"span";return p(S,t,l)}}});function r(s,e){return Math.floor(Math.random()*(e-s+1))+s}function L(s){return s[Math.floor(Math.random()*s.length)]}const G=s=>s.map(e=>({value:e,sort:Math.random()})).sort((e,t)=>e.sort-t.sort).map(({value:e})=>e),w="&minus;",m="+",h="=",f="x";class i{constructor(e,t){this.calculation=e,this.solution=t}static createSumQuest(){const e=[],t=r(1,9),n=r(1,9);return e.push(t.toString()),e.push(m),e.push(n.toString()),e.push(h),e.push(f),new i(e.join(" "),t+n)}static create3PartSumQuest(){const e=[],t=r(1,6),n=r(1,7),o=r(1,6);return e.push(t.toString()),e.push(m),e.push(n.toString()),e.push(m),e.push(o.toString()),e.push(h),e.push(f),new i(e.join(" "),t+n+o)}static create3PartSumWithXInBetweenQuest(){const e=[],t=r(1,5),n=r(1,5),o=r(10,13),u=G([t.toString(),n.toString(),"x"]);return e.push(u[0]),e.push(m),e.push(u[1]),e.push(m),e.push(u[2]),e.push(h),e.push(o.toString()),new i(e.join(" "),o-n-t)}static createTensSumQuest(){const e=[],t=r(1,7)*10,n=r(1,(100-t)/10)*10;return e.push(t.toString()),e.push(m),e.push(n.toString()),e.push(h),e.push(f),new i(e.join(" "),t+n)}static createTensPlusRandomSumQuest(){const e=[];if(L([m,w])===m){const n=r(1,30),o=r(1,5)*10,u=n+o,l=G([n.toString(),o.toString()]);return e.push(l[0]),e.push(m),e.push(l[1]),e.push(h),e.push(f),new i(e.join(" "),u)}else{const n=r(60,100),o=r(1,3)*10,u=n-o;return e.push(n.toString()),e.push(w),e.push(o.toString()),e.push(h),e.push(f),new i(e.join(" "),u)}}static createComplexSums(){const e=[],t=r(1,30),n=r(1,30),o=t+n;return e.push(t.toString()),e.push(m),e.push(n.toString()),e.push(h),e.push(f),new i(e.join(" "),o)}static createTensMinusQuest(){const e=[],t=r(2,10)*10,n=r(1,t/10)*10;return e.push(t.toString()),e.push(w),e.push(n.toString()),e.push(h),e.push(f),new i(e.join(" "),t-n)}static createMinusQuest(){const e=[],t=r(8,15),n=r(1,8);return e.push(t.toString()),e.push(w),e.push(n.toString()),e.push(h),e.push(f),new i(e.join(" "),t-n)}static createBigNumberMinusQuest(){const e=[],t=r(24,99),n=r(1,9);return e.push(t.toString()),e.push(w),e.push(n.toString()),e.push(h),e.push(f),new i(e.join(" "),t-n)}getCalculation(){return this.calculation}getSolution(){return this.solution}getParts(){return this.calculation.split(" ").map(e=>e===f?new R("variable",e,null):new R("string",null,e))}verify(e){return e?(typeof e=="number"?e:parseInt(e))===this.solution:!1}}class R{constructor(e,t,n){this.type=e,this.name=t,this.value=n}getType(){return this.type}isFixed(){return this.value!==null}isVariable(){return!this.isFixed()}getValue(){return this.value}isSymbol(){return[m,w,f,h].includes(this.value||"")}getIdentifier(){return`${this.type}::${this.name||"no-name"}::${this.value||"no-value"}`}}const ue={},re={class:"the-quest"};function ae(s,e){return a(),p("div",re,[j("div",null,[N(s.$slots,"default",{},void 0,!0)])])}const ce=I(ue,[["render",ae],["__scopeId","data-v-99059384"]]),le=C({__name:"TheCard",props:{color:{}},setup(s){const e=s;return(t,n)=>(a(),p("div",{class:x(["the-card",e.color])},[N(t.$slots,"default",{},void 0,!0)],2))}});const D=I(le,[["__scopeId","data-v-cd311e31"]]),ie=["value"],pe=C({__name:"TheFullInput",props:{modelValue:{},error:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,n=k(()=>t.error||!1);return(o,u)=>(a(),p("input",{class:x(["the-full-input",{error:c(n)}]),type:"text",value:t.modelValue,onInput:u[0]||(u[0]=l=>e("update:modelValue",l.target.value))},null,42,ie))}});const de=I(pe,[["__scopeId","data-v-be32a38c"]]),_e={class:"the-points"},me=C({__name:"ThePoints",props:{currentPoints:{},max:{},minToAchieve:{}},setup(s){const e=s,t=T(e.max||15),n=k(()=>e.currentPoints),o=k(()=>Array(t.value).fill(!0)),u=k(()=>12);return(l,S)=>(a(),p("div",_e,[b(V,{columns:c(u)},{default:d(()=>[(a(!0),p(P,null,B(c(o),(_,v)=>(a(),p("div",{key:v,class:x(["point span-1",v<c(n)?"green":""])},null,2))),128))]),_:1},8,["columns"])]))}});const he=I(me,[["__scopeId","data-v-d604ef70"]]),fe=C({__name:"TheButton",props:{color:{}},setup(s){const t=T(s.color||"green");return(n,o)=>(a(),p("button",{class:x(["the-button",`color-${c(t)}`])},[N(n.$slots,"default",{},void 0,!0)],2))}});const ge=I(fe,[["__scopeId","data-v-5c72c98b"]]);const ve={},Se={class:"the-sad-face"};function be(s,e){return a(),p("div",Se,":__(")}const ye=I(ve,[["render",be],["__scopeId","data-v-4f7c8d55"]]),Te=async s=>await new Promise(e=>setTimeout(e,s));function xe(){const s=t=>{const n=document.querySelector(t);if(!(n instanceof HTMLInputElement))throw new TypeError("Could not find input");return n};return{getInputElement:s,focusInputElement:async t=>{await Te(1),s(t).focus()}}}const Ie=["innerHTML"],we=["innerHTML"],ke=".fill-game-input",Ce=C({__name:"fill-game",setup(s){const e=new Map().set("hard",{timeout:360,neededPoints:12,collection:H,createQuest:()=>L([()=>i.createComplexSums(),()=>i.createComplexSums()])()}).set("harder",{timeout:720,neededPoints:16,collection:H,createQuest:()=>L([()=>i.createComplexSums(),()=>i.createComplexSums()])()}),{focusInputElement:t}=xe(),{getStringQueryParameter:n}=se(),o=Z(),u=k(()=>{const $=e.get(n("level"));if(!$)throw new Error("Config given does not exist.");return $}),l=T(u.value.createQuest()),S=T(0),_=T(!1),v=T(null),O=k(()=>v.value||null),M=()=>t(ke),z=()=>l.value.verify(O.value)?F():X(),F=()=>{if(S.value++,S.value>=u.value.neededPoints)return W();v.value=null,l.value=u.value.createQuest(),M()},X=()=>{_.value=!0,S.value=Math.max(0,S.value-3)},W=()=>{o.push({path:"/video/select",query:{timeout:u.value.timeout,collection:u.value.collection}})},J=()=>{l.value=u.value.createQuest(),v.value=null,_.value=!1,M()};return U(()=>M()),($,Q)=>{const K=oe;return a(),y(K,null,{default:d(()=>[b(ce,null,{default:d(()=>[b(ee,{tag:"form",onSubmit:te(z,["prevent"])},{default:d(()=>[b(V,{gap:"2em"},{default:d(()=>[c(_)?(a(),p(P,{key:1},[b(A,null,{default:d(()=>[E("Ai Ai Ai Isabella")]),_:1}),b(ye)],64)):(a(),y(A,{key:0},{default:d(()=>[E(" Ola isabella, faz as contas ! ")]),_:1})),b(he,{"current-points":c(S),max:c(u).neededPoints},null,8,["current-points","max"]),c(_)?(a(),y(V,{key:c(l).getCalculation(),columns:14,class:"quest"},{default:d(()=>[(a(!0),p(P,null,B(c(l).getParts(),g=>(a(),p("div",{key:g.getIdentifier(),class:"span-2"},[b(D,{class:x(["text-center h-4em",g.isFixed()?"opacity-0":void 0]),color:g.isVariable()?"green":void 0},{default:d(()=>[j("span",{class:x(g.isSymbol()?"bigger":""),innerHTML:g.getValue()||c(l).getSolution()},null,10,Ie)]),_:2},1032,["class","color"])]))),128))]),_:1})):q("",!0),(a(),y(V,{key:c(l).getCalculation(),columns:14,class:"quest"},{default:d(()=>[(a(!0),p(P,null,B(c(l).getParts(),g=>(a(),p("div",{key:g.getIdentifier(),class:"span-2"},[g.isFixed()?(a(),y(D,{key:0,class:"text-center h-4em"},{default:d(()=>[j("span",{class:x(g.isSymbol()?"bigger":""),innerHTML:g.getValue()},null,10,we)]),_:2},1024)):(a(),y(de,{key:1,modelValue:c(v),"onUpdate:modelValue":Q[0]||(Q[0]=Y=>ne(v)?v.value=Y:null),class:"text-center fill-game-input",error:c(_),disabled:c(_)},null,8,["modelValue","error","disabled"]))]))),128))]),_:1})),c(_)?(a(),y(ge,{key:3,class:"span-6",onClick:J},{default:d(()=>[E(" Continuar ")]),_:1})):q("",!0)]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})}}});const Ee=I(Ce,[["__scopeId","data-v-65c1ec3e"]]);export{Ee as default};
