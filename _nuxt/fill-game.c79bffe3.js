import{b as k,r as T,e as U,f as p,a as I,o as a,h as E,i as L,j as x,k as P,u as l,l as b,w as d,F as C,m as Q,T as M,p as Z,c as y,q as ee,s as te,t as B,v as q,x as ne}from"./entry.7ade541a.js";import{T as A}from"./TheHeadline.5804f78c.js";import{u as se}from"./use-route.387c77b3.js";import{D as H}from"./index.22ec1e5d.js";const oe=k({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(s,{slots:e,attrs:t}){const n=T(!1);return U(()=>{n.value=!0}),o=>{var m;if(n.value)return(m=e.default)==null?void 0:m.call(e);const u=e.fallback||e.placeholder;if(u)return u();const i=o.fallback||o.placeholder||"",S=o.fallbackTag||o.placeholderTag||"span";return p(S,t,i)}}});function r(s,e){return Math.floor(Math.random()*(e-s+1))+s}function j(s){return s[Math.floor(Math.random()*s.length)]}const R=s=>s.map(e=>({value:e,sort:Math.random()})).sort((e,t)=>e.sort-t.sort).map(({value:e})=>e),w="&minus;",_="+",h="=",f="x";class c{constructor(e,t){this.calculation=e,this.solution=t}static createSumQuest(){const e=[],t=r(1,9),n=r(1,9);return e.push(t.toString()),e.push(_),e.push(n.toString()),e.push(h),e.push(f),new c(e.join(" "),t+n)}static create3PartSumQuest(){const e=[],t=r(1,6),n=r(1,7),o=r(1,6);return e.push(t.toString()),e.push(_),e.push(n.toString()),e.push(_),e.push(o.toString()),e.push(h),e.push(f),new c(e.join(" "),t+n+o)}static create3PartSumWithXInBetweenQuest(){const e=[],t=r(1,5),n=r(1,5),o=r(12,15),u=R([t.toString(),n.toString(),"x"]);return e.push(u[0]),e.push(_),e.push(u[1]),e.push(_),e.push(u[2]),e.push(h),e.push(o.toString()),new c(e.join(" "),o-n-t)}static createTensSumQuest(){const e=[],t=r(1,7)*10,n=r(1,(100-t)/10)*10;return e.push(t.toString()),e.push(_),e.push(n.toString()),e.push(h),e.push(f),new c(e.join(" "),t+n)}static createTensPlusRandomSumQuest(){const e=[];if(j([_,w])===_){const n=r(1,30),o=r(1,5)*10,u=n+o,i=R([n.toString(),o.toString()]);return e.push(i[0]),e.push(_),e.push(i[1]),e.push(h),e.push(f),new c(e.join(" "),u)}else{const n=r(60,100),o=r(1,3)*10,u=n-o;return e.push(n.toString()),e.push(w),e.push(o.toString()),e.push(h),e.push(f),new c(e.join(" "),u)}}static createComplexSums(){const e=[],t=r(1,50),n=r(1,50),o=t+n;return e.push(t.toString()),e.push(_),e.push(n.toString()),e.push(h),e.push(f),new c(e.join(" "),o)}static createTensMinusQuest(){const e=[],t=r(2,10)*10,n=r(1,t/10)*10;return e.push(t.toString()),e.push(w),e.push(n.toString()),e.push(h),e.push(f),new c(e.join(" "),t-n)}static createMinusQuest(){const e=[],t=r(8,15),n=r(1,8);return e.push(t.toString()),e.push(w),e.push(n.toString()),e.push(h),e.push(f),new c(e.join(" "),t-n)}static createBigNumberMinusQuest(){const e=[],t=r(24,99),n=r(1,9);return e.push(t.toString()),e.push(w),e.push(n.toString()),e.push(h),e.push(f),new c(e.join(" "),t-n)}getCalculation(){return this.calculation}getSolution(){return this.solution}getParts(){return this.calculation.split(" ").map(e=>e===f?new G("variable",e,null):new G("string",null,e))}verify(e){return e?(typeof e=="number"?e:parseInt(e))===this.solution:!1}}class G{constructor(e,t,n){this.type=e,this.name=t,this.value=n}getType(){return this.type}isFixed(){return this.value!==null}isVariable(){return!this.isFixed()}getValue(){return this.value}isSymbol(){return[_,w,f,h].includes(this.value||"")}getIdentifier(){return`${this.type}::${this.name||"no-name"}::${this.value||"no-value"}`}}const ue={},re={class:"the-quest"};function ae(s,e){return a(),p("div",re,[E("div",null,[L(s.$slots,"default",{},void 0,!0)])])}const ce=I(ue,[["render",ae],["__scopeId","data-v-99059384"]]),le=k({__name:"TheCard",props:{color:{}},setup(s){const e=s;return(t,n)=>(a(),p("div",{class:x(["the-card",e.color])},[L(t.$slots,"default",{},void 0,!0)],2))}});const D=I(le,[["__scopeId","data-v-cd311e31"]]),ie=["value"],pe=k({__name:"TheFullInput",props:{modelValue:{},error:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,n=P(()=>t.error||!1);return(o,u)=>(a(),p("input",{class:x(["the-full-input",{error:l(n)}]),type:"text",value:t.modelValue,onInput:u[0]||(u[0]=i=>e("update:modelValue",i.target.value))},null,42,ie))}});const de=I(pe,[["__scopeId","data-v-be32a38c"]]),me={class:"the-points"},_e=k({__name:"ThePoints",props:{currentPoints:{},max:{},minToAchieve:{}},setup(s){const e=s,t=T(e.max||15),n=P(()=>e.currentPoints),o=P(()=>Array(t.value).fill(!0)),u=P(()=>12);return(i,S)=>(a(),p("div",me,[b(M,{columns:l(u)},{default:d(()=>[(a(!0),p(C,null,Q(l(o),(m,v)=>(a(),p("div",{key:v,class:x(["point span-1",v<l(n)?"green":""])},null,2))),128))]),_:1},8,["columns"])]))}});const he=I(_e,[["__scopeId","data-v-d604ef70"]]),fe=k({__name:"TheButton",props:{color:{}},setup(s){const t=T(s.color||"green");return(n,o)=>(a(),p("button",{class:x(["the-button",`color-${l(t)}`])},[L(n.$slots,"default",{},void 0,!0)],2))}});const ge=I(fe,[["__scopeId","data-v-5c72c98b"]]);const ve={},Se={class:"the-sad-face"};function be(s,e){return a(),p("div",Se,":__(")}const ye=I(ve,[["render",be],["__scopeId","data-v-4f7c8d55"]]),Te=async s=>await new Promise(e=>setTimeout(e,s));function xe(){const s=t=>{const n=document.querySelector(t);if(!(n instanceof HTMLInputElement))throw new TypeError("Could not find input");return n};return{getInputElement:s,focusInputElement:async t=>{await Te(1),s(t).focus()}}}const Ie=["innerHTML"],we=["innerHTML"],Pe=".fill-game-input",ke=k({__name:"fill-game",setup(s){const e=new Map().set("hard",{timeout:180,neededPoints:12,collection:H,createQuest:()=>j([()=>c.createComplexSums(),()=>c.create3PartSumWithXInBetweenQuest()])()}).set("harder",{timeout:720,neededPoints:20,collection:H,createQuest:()=>j([()=>c.createComplexSums(),()=>c.createComplexSums(),()=>c.createComplexSums(),()=>c.createMinusQuest(),()=>c.create3PartSumWithXInBetweenQuest(),()=>c.createTensPlusRandomSumQuest()])()}),{focusInputElement:t}=xe(),{getStringQueryParameter:n}=se(),o=Z(),u=P(()=>{const $=e.get(n("level"));if(!$)throw new Error("Config given does not exist.");return $}),i=T(u.value.createQuest()),S=T(0),m=T(!1),v=T(null),X=P(()=>v.value||null),V=()=>t(Pe),O=()=>i.value.verify(X.value)?W():z(),W=()=>{if(S.value++,S.value>=u.value.neededPoints)return F();v.value=null,i.value=u.value.createQuest(),V()},z=()=>{m.value=!0,S.value=Math.max(0,S.value-3)},F=()=>{o.push({path:"/video/select",query:{timeout:u.value.timeout,collection:u.value.collection}})},J=()=>{i.value=u.value.createQuest(),v.value=null,m.value=!1,V()};return U(()=>V()),($,N)=>{const K=oe;return a(),y(K,null,{default:d(()=>[b(ce,null,{default:d(()=>[b(ee,{tag:"form",onSubmit:te(O,["prevent"])},{default:d(()=>[b(M,{gap:"2em"},{default:d(()=>[l(m)?(a(),p(C,{key:1},[b(A,null,{default:d(()=>[B("Ai Ai Ai Isabella")]),_:1}),b(ye)],64)):(a(),y(A,{key:0},{default:d(()=>[B(" Ola isabella, faz as contas ! ")]),_:1})),b(he,{"current-points":l(S),max:l(u).neededPoints},null,8,["current-points","max"]),l(m)?(a(),y(M,{key:l(i).getCalculation(),columns:14,class:"quest"},{default:d(()=>[(a(!0),p(C,null,Q(l(i).getParts(),g=>(a(),p("div",{key:g.getIdentifier(),class:"span-2"},[b(D,{class:x(["text-center h-4em",g.isFixed()?"opacity-0":void 0]),color:g.isVariable()?"green":void 0},{default:d(()=>[E("span",{class:x(g.isSymbol()?"bigger":""),innerHTML:g.getValue()||l(i).getSolution()},null,10,Ie)]),_:2},1032,["class","color"])]))),128))]),_:1})):q("",!0),(a(),y(M,{key:l(i).getCalculation(),columns:14,class:"quest"},{default:d(()=>[(a(!0),p(C,null,Q(l(i).getParts(),g=>(a(),p("div",{key:g.getIdentifier(),class:"span-2"},[g.isFixed()?(a(),y(D,{key:0,class:"text-center h-4em"},{default:d(()=>[E("span",{class:x(g.isSymbol()?"bigger":""),innerHTML:g.getValue()},null,10,we)]),_:2},1024)):(a(),y(de,{key:1,modelValue:l(v),"onUpdate:modelValue":N[0]||(N[0]=Y=>ne(v)?v.value=Y:null),class:"text-center fill-game-input",error:l(m),disabled:l(m)},null,8,["modelValue","error","disabled"]))]))),128))]),_:1})),l(m)?(a(),y(ge,{key:3,class:"span-6",onClick:J},{default:d(()=>[B(" Continuar ")]),_:1})):q("",!0)]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})}}});const Be=I(ke,[["__scopeId","data-v-c6556dcc"]]);export{Be as default};
