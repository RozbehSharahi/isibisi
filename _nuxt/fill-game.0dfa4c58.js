import{b as w,r as T,e as F,f as i,a as I,o as u,h as B,i as N,j as x,k,u as o,l as v,w as _,F as P,m as E,T as V,p as K,c as S,q as Y,s as Z,t as Q,v as L,x as ee}from"./entry.d66e7737.js";import{T as q}from"./TheHeadline.7d9470cb.js";import{u as te}from"./use-route.bbc94dfd.js";import{S as ne,M as se}from"./index.9aa793cb.js";const ue=w({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(s,{slots:e,attrs:t}){const n=T(!1);return F(()=>{n.value=!0}),a=>{var h;if(n.value)return(h=e.default)==null?void 0:h.call(e);const r=e.fallback||e.placeholder;if(r)return r();const f=a.fallback||a.placeholder||"",d=a.fallbackTag||a.placeholderTag||"span";return i(d,t,f)}}});function c(s,e){return Math.floor(Math.random()*(e-s+1))+s}function oe(s){return s[Math.floor(Math.random()*s.length)]}const ae=s=>s.map(e=>({value:e,sort:Math.random()})).sort((e,t)=>e.sort-t.sort).map(({value:e})=>e),$="&minus;",y="+",g="=",b="x";class l{constructor(e,t){this.calculation=e,this.solution=t}static createSumQuest(){const e=[],t=c(1,9),n=c(1,9);return e.push(t.toString()),e.push(y),e.push(n.toString()),e.push(g),e.push(b),new l(e.join(" "),t+n)}static create3PartSumQuest(){const e=[],t=c(1,6),n=c(1,7),a=c(1,6);return e.push(t.toString()),e.push(y),e.push(n.toString()),e.push(y),e.push(a.toString()),e.push(g),e.push(b),new l(e.join(" "),t+n+a)}static create3PartSumWithXInBetweenQuest(){const e=[],t=c(1,5),n=c(1,5),a=c(10,13),r=ae([t.toString(),n.toString(),"x"]);return e.push(r[0]),e.push(y),e.push(r[1]),e.push(y),e.push(r[2]),e.push(g),e.push(a.toString()),new l(e.join(" "),a-n-t)}static createTensSumQuest(){const e=[],t=c(1,7)*10,n=c(1,(100-t)/10)*10;return e.push(t.toString()),e.push(y),e.push(n.toString()),e.push(g),e.push(b),new l(e.join(" "),t+n)}static createTensMinusQuest(){const e=[],t=c(2,10)*10,n=c(1,t/10)*10;return e.push(t.toString()),e.push($),e.push(n.toString()),e.push(g),e.push(b),new l(e.join(" "),t-n)}static createMinusQuest(){const e=[],t=c(8,15),n=c(1,8);return e.push(t.toString()),e.push($),e.push(n.toString()),e.push(g),e.push(b),new l(e.join(" "),t-n)}static createBigNumberMinusQuest(){const e=[],t=c(24,99),n=c(1,9);return e.push(t.toString()),e.push($),e.push(n.toString()),e.push(g),e.push(b),new l(e.join(" "),t-n)}getCalculation(){return this.calculation}getSolution(){return this.solution}getParts(){return this.calculation.split(" ").map(e=>e===b?new A("variable",e,null):new A("string",null,e))}verify(e){return e?(typeof e=="number"?e:parseInt(e))===this.solution:!1}}class A{constructor(e,t,n){this.type=e,this.name=t,this.value=n}getType(){return this.type}isFixed(){return this.value!==null}isVariable(){return!this.isFixed()}getValue(){return this.value}isSymbol(){return[y,$,b,g].includes(this.value||"")}getIdentifier(){return`${this.type}::${this.name||"no-name"}::${this.value||"no-value"}`}}const re={},ce={class:"the-quest"};function le(s,e){return u(),i("div",ce,[B("div",null,[N(s.$slots,"default",{},void 0,!0)])])}const ie=I(re,[["render",le],["__scopeId","data-v-99059384"]]),_e=w({__name:"TheCard",props:{color:{}},setup(s){const e=s;return(t,n)=>(u(),i("div",{class:x(["the-card",e.color])},[N(t.$slots,"default",{},void 0,!0)],2))}});const H=I(_e,[["__scopeId","data-v-cd311e31"]]),de=["value"],pe=w({__name:"TheFullInput",props:{modelValue:{},error:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,n=k(()=>t.error||!1);return(a,r)=>(u(),i("input",{class:x(["the-full-input",{error:o(n)}]),type:"text",value:t.modelValue,onInput:r[0]||(r[0]=f=>e("update:modelValue",f.target.value))},null,42,de))}});const me=I(pe,[["__scopeId","data-v-be32a38c"]]),he={class:"the-points"},fe=w({__name:"ThePoints",props:{currentPoints:{},max:{},minToAchieve:{}},setup(s){const e=s,t=T(e.max||15),n=k(()=>e.currentPoints),a=k(()=>Array(t.value).fill(!0)),r=k(()=>12);return(f,d)=>(u(),i("div",he,[v(V,{columns:o(r)},{default:_(()=>[(u(!0),i(P,null,E(o(a),(h,p)=>(u(),i("div",{key:p,class:x(["point span-1",p<o(n)?"green":""])},null,2))),128))]),_:1},8,["columns"])]))}});const ve=I(fe,[["__scopeId","data-v-d604ef70"]]),ge=w({__name:"TheButton",props:{color:{}},setup(s){const t=T(s.color||"green");return(n,a)=>(u(),i("button",{class:x(["the-button",`color-${o(t)}`])},[N(n.$slots,"default",{},void 0,!0)],2))}});const be=I(ge,[["__scopeId","data-v-5c72c98b"]]);const Se={},ye={class:"the-sad-face"};function Te(s,e){return u(),i("div",ye,":__(")}const xe=I(Se,[["render",Te],["__scopeId","data-v-4f7c8d55"]]),Ie=async s=>await new Promise(e=>setTimeout(e,s));function Me(){const s=t=>{const n=document.querySelector(t);if(!(n instanceof HTMLInputElement))throw new TypeError("Could not find input");return n};return{getInputElement:s,focusInputElement:async t=>{await Ie(1),s(t).focus()}}}const ke=["innerHTML"],we=["innerHTML"],Pe=".fill-game-input",Ve=w({__name:"fill-game",setup(s){const e={default:{timeout:180,neededPoints:12,collection:ne},media:{timeout:540,neededPoints:16,collection:se}},{focusInputElement:t}=Me(),{getStringQueryParameter:n}=te(),a=K(),r=k(()=>e[n("level")]||e.default),f=()=>oe([()=>l.createTensSumQuest(),()=>l.createTensMinusQuest(),()=>l.create3PartSumWithXInBetweenQuest(),()=>l.createSumQuest(),()=>l.create3PartSumQuest(),()=>l.createMinusQuest(),()=>l.createBigNumberMinusQuest()])(),d=T(f()),h=T(0),p=T(!1),M=T(null),G=k(()=>M.value||null),C=()=>t(Pe),O=()=>d.value.verify(G.value)?U():D(),U=()=>{if(h.value++,h.value>=r.value.neededPoints)return R();M.value=null,d.value=f(),C()},D=()=>{p.value=!0,h.value=Math.max(0,h.value-3)},R=()=>{a.push({path:"/video/select",query:{timeout:r.value.timeout,collection:r.value.collection}})},X=()=>{d.value=f(),M.value=null,p.value=!1,C()};return F(()=>C()),(z,j)=>{const W=ue;return u(),S(W,null,{default:_(()=>[v(ie,null,{default:_(()=>[v(Y,{tag:"form",onSubmit:Z(O,["prevent"])},{default:_(()=>[v(V,{gap:"2em"},{default:_(()=>[o(p)?(u(),i(P,{key:1},[v(q,null,{default:_(()=>[Q("Ai Ai Ai Isabella")]),_:1}),v(xe)],64)):(u(),S(q,{key:0},{default:_(()=>[Q(" Ola isabella, faz as contas ! ")]),_:1})),v(ve,{"current-points":o(h),max:o(r).neededPoints},null,8,["current-points","max"]),o(p)?(u(),S(V,{key:o(d).getCalculation(),columns:14,class:"quest"},{default:_(()=>[(u(!0),i(P,null,E(o(d).getParts(),m=>(u(),i("div",{key:m.getIdentifier(),class:"span-2"},[v(H,{class:x(["text-center h-4em",m.isFixed()?"opacity-0":void 0]),color:m.isVariable()?"green":void 0},{default:_(()=>[B("span",{class:x(m.isSymbol()?"bigger":""),innerHTML:m.getValue()||o(d).getSolution()},null,10,ke)]),_:2},1032,["class","color"])]))),128))]),_:1})):L("",!0),(u(),S(V,{key:o(d).getCalculation(),columns:14,class:"quest"},{default:_(()=>[(u(!0),i(P,null,E(o(d).getParts(),m=>(u(),i("div",{key:m.getIdentifier(),class:"span-2"},[m.isFixed()?(u(),S(H,{key:0,class:"text-center h-4em"},{default:_(()=>[B("span",{class:x(m.isSymbol()?"bigger":""),innerHTML:m.getValue()},null,10,we)]),_:2},1024)):(u(),S(me,{key:1,modelValue:o(M),"onUpdate:modelValue":j[0]||(j[0]=J=>ee(M)?M.value=J:null),class:"text-center fill-game-input",error:o(p),disabled:o(p)},null,8,["modelValue","error","disabled"]))]))),128))]),_:1})),o(p)?(u(),S(be,{key:3,class:"span-6",onClick:X},{default:_(()=>[Q(" Continuar ")]),_:1})):L("",!0)]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})}}});const Ee=I(Ve,[["__scopeId","data-v-9fb3c20d"]]);export{Ee as default};
