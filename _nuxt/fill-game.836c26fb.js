import{b as C,r as T,e as U,f as p,a as w,o as a,h as E,i as N,j as I,k,u as c,l as S,w as d,F as M,m as B,T as P,p as Z,c as y,q as ee,s as te,t as j,v as A,x as ne}from"./entry.4bc0f779.js";import{T as Q}from"./TheHeadline.413946d1.js";import{u as se}from"./use-route.acdc4ed0.js";import{D as H}from"./index.22ec1e5d.js";const oe=C({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(o,{slots:e,attrs:t}){const n=T(!1);return U(()=>{n.value=!0}),s=>{var h;if(n.value)return(h=e.default)==null?void 0:h.call(e);const r=e.fallback||e.placeholder;if(r)return r();const l=s.fallback||s.placeholder||"",b=s.fallbackTag||s.placeholderTag||"span";return p(b,t,l)}}});function u(o,e){return Math.floor(Math.random()*(e-o+1))+o}function L(o){return o[Math.floor(Math.random()*o.length)]}const G=o=>o.map(e=>({value:e,sort:Math.random()})).sort((e,t)=>e.sort-t.sort).map(({value:e})=>e),x="&minus;",f="+",m="=",_="x";class i{constructor(e,t){this.calculation=e,this.solution=t}static createSumQuest(){const e=[],t=u(1,9),n=u(1,9);return e.push(t.toString()),e.push(f),e.push(n.toString()),e.push(m),e.push(_),new i(e.join(" "),t+n)}static create3PartSumQuest(){const e=[],t=u(1,6),n=u(1,7),s=u(1,6);return e.push(t.toString()),e.push(f),e.push(n.toString()),e.push(f),e.push(s.toString()),e.push(m),e.push(_),new i(e.join(" "),t+n+s)}static create3PartSumWithXInBetweenQuest(){const e=[],t=u(1,5),n=u(1,5),s=u(12,15),r=G([t.toString(),n.toString(),"x"]);return e.push(r[0]),e.push(f),e.push(r[1]),e.push(f),e.push(r[2]),e.push(m),e.push(s.toString()),new i(e.join(" "),s-n-t)}static createTensSumQuest(){const e=[],t=u(1,7)*10,n=u(1,(100-t)/10)*10;return e.push(t.toString()),e.push(f),e.push(n.toString()),e.push(m),e.push(_),new i(e.join(" "),t+n)}static createTensPlusRandomSumQuest(){const e=[];if(L([f,x])===f){const n=u(1,30),s=u(1,5)*10,r=n+s,l=G([n.toString(),s.toString()]);return e.push(l[0]),e.push(f),e.push(l[1]),e.push(m),e.push(_),new i(e.join(" "),r)}else{const n=u(60,100),s=u(1,3)*10,r=n-s;return e.push(n.toString()),e.push(x),e.push(s.toString()),e.push(m),e.push(_),new i(e.join(" "),r)}}static createComplexSums(){const e=[],t=u(1,60),n=u(1,60),s=t+n;return e.push(t.toString()),e.push(f),e.push(n.toString()),e.push(m),e.push(_),new i(e.join(" "),s)}static createTensMinusQuest(){const e=[],t=u(2,10)*10,n=u(1,t/10)*10;return e.push(t.toString()),e.push(x),e.push(n.toString()),e.push(m),e.push(_),new i(e.join(" "),t-n)}static createMinusQuest(){const e=[],t=u(8,15),n=u(1,8);return e.push(t.toString()),e.push(x),e.push(n.toString()),e.push(m),e.push(_),new i(e.join(" "),t-n)}static createBigNumberMinusQuest(){const e=[],t=u(24,99),n=u(1,9);return e.push(t.toString()),e.push(x),e.push(n.toString()),e.push(m),e.push(_),new i(e.join(" "),t-n)}static createComplexMinus(){const e=[],t=u(11,99),n=u(11,99),s=[t,n].sort().reverse();return e.push(s[0].toString()),e.push(x),e.push(s[1].toString()),e.push(m),e.push(_),new i(e.join(" "),s[0]-s[1])}getCalculation(){return this.calculation}getSolution(){return this.solution}getParts(){return this.calculation.split(" ").map(e=>e===_?new R("variable",e,null):new R("string",null,e))}verify(e){return e?(typeof e=="number"?e:parseInt(e))===this.solution:!1}}class R{constructor(e,t,n){this.type=e,this.name=t,this.value=n}getType(){return this.type}isFixed(){return this.value!==null}isVariable(){return!this.isFixed()}getValue(){return this.value}isSymbol(){return[f,x,_,m].includes(this.value||"")}getIdentifier(){return`${this.type}::${this.name||"no-name"}::${this.value||"no-value"}`}}const ue={},re={class:"the-quest"};function ae(o,e){return a(),p("div",re,[E("div",null,[N(o.$slots,"default",{},void 0,!0)])])}const ce=w(ue,[["render",ae],["__scopeId","data-v-99059384"]]),le=C({__name:"TheCard",props:{color:{}},setup(o){const e=o;return(t,n)=>(a(),p("div",{class:I(["the-card",e.color])},[N(t.$slots,"default",{},void 0,!0)],2))}});const D=w(le,[["__scopeId","data-v-cd311e31"]]),ie=["value"],pe=C({__name:"TheFullInput",props:{modelValue:{},error:{type:Boolean}},emits:["update:modelValue"],setup(o,{emit:e}){const t=o,n=k(()=>t.error||!1);return(s,r)=>(a(),p("input",{class:I(["the-full-input",{error:c(n)}]),type:"text",value:t.modelValue,onInput:r[0]||(r[0]=l=>e("update:modelValue",l.target.value))},null,42,ie))}});const de=w(pe,[["__scopeId","data-v-be32a38c"]]),me={class:"the-points"},_e=C({__name:"ThePoints",props:{currentPoints:{},max:{},minToAchieve:{}},setup(o){const e=o,t=T(e.max||15),n=k(()=>e.currentPoints),s=k(()=>Array(t.value).fill(!0)),r=k(()=>12);return(l,b)=>(a(),p("div",me,[S(P,{columns:c(r)},{default:d(()=>[(a(!0),p(M,null,B(c(s),(h,v)=>(a(),p("div",{key:v,class:I(["point span-1",v<c(n)?"green":""])},null,2))),128))]),_:1},8,["columns"])]))}});const he=w(_e,[["__scopeId","data-v-d604ef70"]]),fe=C({__name:"TheButton",props:{color:{}},setup(o){const t=T(o.color||"green");return(n,s)=>(a(),p("button",{class:I(["the-button",`color-${c(t)}`])},[N(n.$slots,"default",{},void 0,!0)],2))}});const ge=w(fe,[["__scopeId","data-v-5c72c98b"]]);const ve={},be={class:"the-sad-face"};function Se(o,e){return a(),p("div",be,":__(")}const ye=w(ve,[["render",Se],["__scopeId","data-v-4f7c8d55"]]),xe=async o=>await new Promise(e=>setTimeout(e,o));function Te(){const o=t=>{const n=document.querySelector(t);if(!(n instanceof HTMLInputElement))throw new TypeError("Could not find input");return n};return{getInputElement:o,focusInputElement:async t=>{await xe(1),o(t).focus()}}}const Ie=["innerHTML"],we=["innerHTML"],ke=".fill-game-input",Ce=C({__name:"fill-game",setup(o){const e=new Map().set("hard",{timeout:180,neededPoints:12,collection:H,createQuest:()=>L([()=>i.createComplexSums(),()=>i.createComplexMinus()])()}).set("harder",{timeout:720,neededPoints:20,collection:H,createQuest:()=>L([()=>i.createComplexSums(),()=>i.createComplexMinus()])()}),{focusInputElement:t}=Te(),{getStringQueryParameter:n}=se(),s=Z(),r=k(()=>{const $=e.get(n("level"));if(!$)throw new Error("Config given does not exist.");return $}),l=T(r.value.createQuest()),b=T(0),h=T(!1),v=T(null),O=k(()=>v.value||null),V=()=>t(ke),z=()=>l.value.verify(O.value)?X():F(),X=()=>{if(b.value++,b.value>=r.value.neededPoints)return W();v.value=null,l.value=r.value.createQuest(),V()},F=()=>{h.value=!0,b.value=Math.max(0,b.value-3)},W=()=>{s.push({path:"/video/select",query:{timeout:r.value.timeout,collection:r.value.collection}})},J=()=>{l.value=r.value.createQuest(),v.value=null,h.value=!1,V()};return U(()=>V()),($,q)=>{const K=oe;return a(),y(K,null,{default:d(()=>[S(ce,null,{default:d(()=>[S(ee,{tag:"form",onSubmit:te(z,["prevent"])},{default:d(()=>[S(P,{gap:"2em"},{default:d(()=>[c(h)?(a(),p(M,{key:1},[S(Q,null,{default:d(()=>[j("Ai Ai Ai Isabella")]),_:1}),S(ye)],64)):(a(),y(Q,{key:0},{default:d(()=>[j(" Ola isabella, faz as contas ! ")]),_:1})),S(he,{"current-points":c(b),max:c(r).neededPoints},null,8,["current-points","max"]),c(h)?(a(),y(P,{key:c(l).getCalculation(),columns:14,class:"quest"},{default:d(()=>[(a(!0),p(M,null,B(c(l).getParts(),g=>(a(),p("div",{key:g.getIdentifier(),class:"span-2"},[S(D,{class:I(["text-center h-4em",g.isFixed()?"opacity-0":void 0]),color:g.isVariable()?"green":void 0},{default:d(()=>[E("span",{class:I(g.isSymbol()?"bigger":""),innerHTML:g.getValue()||c(l).getSolution()},null,10,Ie)]),_:2},1032,["class","color"])]))),128))]),_:1})):A("",!0),(a(),y(P,{key:c(l).getCalculation(),columns:14,class:"quest"},{default:d(()=>[(a(!0),p(M,null,B(c(l).getParts(),g=>(a(),p("div",{key:g.getIdentifier(),class:"span-2"},[g.isFixed()?(a(),y(D,{key:0,class:"text-center h-4em"},{default:d(()=>[E("span",{class:I(g.isSymbol()?"bigger":""),innerHTML:g.getValue()},null,10,we)]),_:2},1024)):(a(),y(de,{key:1,modelValue:c(v),"onUpdate:modelValue":q[0]||(q[0]=Y=>ne(v)?v.value=Y:null),class:"text-center fill-game-input",error:c(h),disabled:c(h)},null,8,["modelValue","error","disabled"]))]))),128))]),_:1})),c(h)?(a(),y(ge,{key:3,class:"span-6",onClick:J},{default:d(()=>[j(" Continuar ")]),_:1})):A("",!0)]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})}}});const je=w(Ce,[["__scopeId","data-v-3007a042"]]);export{je as default};
