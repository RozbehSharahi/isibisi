import{b as w,r as y,e as H,f as i,a as S,o as a,h as O,i as C,j as x,k as P,u as l,w as W,l as g,m as d,F as V,p as U,T as B,q as F,c as T,s as J,t as K,v as Q,x as Y,y as Z}from"./entry.01bb56f2.js";import{T as A}from"./TheHeadline.91ddb77e.js";import{u as ee}from"./use-route.1780b48f.js";import{S as te,M as ne}from"./index.9aa793cb.js";const se=w({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(s,{slots:e,attrs:t}){const n=y(!1);return H(()=>{n.value=!0}),u=>{var p;if(n.value)return(p=e.default)==null?void 0:p.call(e);const o=e.fallback||e.placeholder;if(o)return o();const _=u.fallback||u.placeholder||"",m=u.fallbackTag||u.placeholderTag||"span";return i(m,t,_)}}});function r(s,e){return Math.floor(Math.random()*(e-s+1))+s}function ue(s){return s[Math.floor(Math.random()*s.length)]}const oe=s=>s.map(e=>({value:e,sort:Math.random()})).sort((e,t)=>e.sort-t.sort).map(({value:e})=>e),$="&minus;",b="+",h="=",f="x";class c{constructor(e,t){this.calculation=e,this.solution=t}static createSumQuest(){const e=[],t=r(1,9),n=r(1,9);return e.push(t.toString()),e.push(b),e.push(n.toString()),e.push(h),e.push(f),new c(e.join(" "),t+n)}static create3PartSumQuest(){const e=[],t=r(1,6),n=r(1,7),u=r(1,6);return e.push(t.toString()),e.push(b),e.push(n.toString()),e.push(b),e.push(u.toString()),e.push(h),e.push(f),new c(e.join(" "),t+n+u)}static create3PartSumWithXInBetweenQuest(){const e=[],t=r(1,5),n=r(1,5),u=r(10,13),o=oe([t.toString(),n.toString(),"x"]);return e.push(o[0]),e.push(b),e.push(o[1]),e.push(b),e.push(o[2]),e.push(h),e.push(u.toString()),new c(e.join(" "),u-n-t)}static createTensSumQuest(){const e=[],t=r(1,7)*10,n=r(1,(100-t)/10)*10;return e.push(t.toString()),e.push(b),e.push(n.toString()),e.push(h),e.push(f),new c(e.join(" "),t+n)}static createTensMinusQuest(){const e=[],t=r(2,10)*10,n=r(1,t/10)*10;return e.push(t.toString()),e.push($),e.push(n.toString()),e.push(h),e.push(f),new c(e.join(" "),t-n)}static createMinusQuest(){const e=[],t=r(8,15),n=r(1,8);return e.push(t.toString()),e.push($),e.push(n.toString()),e.push(h),e.push(f),new c(e.join(" "),t-n)}static createBigNumberMinusQuest(){const e=[],t=r(24,99),n=r(1,9);return e.push(t.toString()),e.push($),e.push(n.toString()),e.push(h),e.push(f),new c(e.join(" "),t-n)}getCalculation(){return this.calculation}getSolution(){return this.solution}getParts(){return this.calculation.split(" ").map(e=>e===f?new L("variable",e,null):new L("string",null,e))}verify(e){return(typeof e=="number"?e:parseInt(e))===this.solution}}class L{constructor(e,t,n){this.type=e,this.name=t,this.value=n}getType(){return this.type}getName(){return this.name}getValue(){return this.value}isSymbol(){return[b,$,f,h].includes(this.value||"")}getIdentifier(){return`${this.type}::${this.name||"no-name"}::${this.value||"no-value"}`}}const ae={},re={class:"the-quest"};function ce(s,e){return a(),i("div",re,[O("div",null,[C(s.$slots,"default",{},void 0,!0)])])}const le=S(ae,[["render",ce],["__scopeId","data-v-99059384"]]);const ie={},_e={class:"the-card"};function pe(s,e){return a(),i("div",_e,[C(s.$slots,"default",{},void 0,!0)])}const de=S(ie,[["render",pe],["__scopeId","data-v-1629d3e7"]]),me=["value"],he=w({__name:"TheFullInput",props:{modelValue:{},error:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,n=x(()=>t.error||!1);return(u,o)=>(a(),i("input",{class:P(["the-full-input",{error:l(n)}]),type:"text",value:t.modelValue,onInput:o[0]||(o[0]=_=>e("update:modelValue",_.target.value))},null,42,me))}});const fe=S(he,[["__scopeId","data-v-be32a38c"]]),ve={class:"the-points"},ge=w({__name:"ThePoints",props:{currentPoints:{},max:{},minToAchieve:{}},emits:["success","fail","change"],setup(s,{emit:e}){const t=s,n=y(t.max||15),u=x(()=>t.minToAchieve||n.value),o=x(()=>t.currentPoints),_=x(()=>Array(n.value).fill(!0)),m=x(()=>12);return W(o,()=>{e(o.value===u.value?"success":"fail")}),(p,v)=>(a(),i("div",ve,[g(B,{columns:l(m)},{default:d(()=>[(a(!0),i(V,null,U(l(_),(N,I)=>(a(),i("div",{key:I,class:P(["point span-1",I<l(o)?"green":""])},null,2))),128))]),_:1},8,["columns"])]))}});const be=S(ge,[["__scopeId","data-v-eb225bef"]]),q=async s=>await new Promise(e=>setTimeout(e,s)),ye=w({__name:"TheButton",props:{color:{}},setup(s){const t=y(s.color||"green");return(n,u)=>(a(),i("button",{class:P(["the-button",`color-${l(t)}`])},[C(n.$slots,"default",{},void 0,!0)],2))}});const Se=S(ye,[["__scopeId","data-v-5c72c98b"]]);const Te={},xe={class:"the-sad-face"};function Ie(s,e){return a(),i("div",xe,":__(")}const we=S(Te,[["render",Ie],["__scopeId","data-v-4f7c8d55"]]),ke=["innerHTML"],Me=w({__name:"fill-game",setup(s){const e={default:{timeout:180,neededPoints:12,collection:te},media:{timeout:540,neededPoints:16,collection:ne}},{getStringQueryParameter:t}=ee(),n=F(),u=x(()=>e[t("level")]||e.default),o=()=>ue([()=>c.createTensSumQuest(),()=>c.createTensMinusQuest(),()=>c.create3PartSumWithXInBetweenQuest(),()=>c.createSumQuest(),()=>c.create3PartSumQuest(),()=>c.createMinusQuest(),()=>c.createBigNumberMinusQuest()])(),_=y(o()),m=y(0),p=y(!1),v=y(null),N=()=>v.value||"",I=()=>{const k=document.getElementsByClassName("input")[0];if(!(k instanceof HTMLInputElement))throw new TypeError("Could not find input");return k},E=async()=>{await q(1),I().focus()},D=()=>{if(_.value.verify(N())){v.value=null,m.value++,_.value=o(),E();return}p.value=!0,m.value=0},G=()=>{n.push({path:"/video/select",query:{timeout:u.value.timeout,collection:u.value.collection}})},R=()=>{v.value=null,m.value=0,_.value=o(),p.value=!1,E()};return H(async()=>{await q(1),I().focus()}),(k,j)=>{const X=se;return a(),T(X,null,{default:d(()=>[g(le,null,{default:d(()=>[g(J,{tag:"form",onSubmit:K(D,["prevent"])},{default:d(()=>[g(B,{gap:"2em"},{default:d(()=>[l(p)?(a(),i(V,{key:1},[g(A,null,{default:d(()=>[Q("Tenta de novo")]),_:1}),g(we)],64)):(a(),T(A,{key:0},{default:d(()=>[Q(" Ola isabella, faz as contas ! ")]),_:1})),g(be,{"current-points":l(m),max:l(u).neededPoints,onSuccess:G},null,8,["current-points","max"]),(a(),T(B,{key:l(_).getCalculation(),columns:14,class:"quest"},{default:d(()=>[(a(!0),i(V,null,U(l(_).getParts(),M=>(a(),i("div",{key:M.getIdentifier(),class:"span-2"},[M.getType()==="string"?(a(),T(de,{key:0,class:"text-center h-4em"},{default:d(()=>[O("span",{class:P(M.isSymbol()?"bigger":""),innerHTML:M.getValue()},null,10,ke)]),_:2},1024)):(a(),T(fe,{key:1,modelValue:l(v),"onUpdate:modelValue":j[0]||(j[0]=z=>Z(v)?v.value=z:null),class:"text-center input",error:l(p),disabled:l(p)},null,8,["modelValue","error","disabled"]))]))),128))]),_:1})),l(p)?(a(),T(Se,{key:2,class:"span-6",onClick:R},{default:d(()=>[Q(" De novo ")]),_:1})):Y("",!0)]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})}}});const Be=S(Me,[["__scopeId","data-v-b604df82"]]);export{Be as default};
